{# Moments Dashboard Template - Temporal Echoes #}
# Palimpsest — Moments

Temporal echoes: how dates ripple through the journal.

---

## Overview

| Type | Count | Description |
|------|-------|-------------|
| **Moments** | {{ stats.moments }} | Events that happened on the referenced date |
| **References** | {{ stats.references }} | Contextual links to other dates |
| **Total** | {{ stats.total }} | All dated moments in the journal |

---

## Understanding Moments vs References

A **moment** is an event that actually happened on the referenced date and is narrated in a journal entry.

A **reference** is a contextual link where the action happens on the *entry* date, but references something from another time. References are dates that "echo" through time, mentioned again and again.

---

## Most Echoed Dates

These dates ripple through time, referenced again and again:

{% if most_echoed %}
{% for echo in most_echoed %}
### {{ echo.date|format_date('%Y-%m-%d') }}{% if echo.context %} — {{ echo.context }}{% endif %}

| Original Entry | {{ echo.original_entry.date|format_date('%Y-%m-%d') if echo.original_entry else 'Unknown' }} |
| Referenced In | {{ echo.reference_count }} later entries |

{% if echo.references %}
**Referenced in:**
{% for ref in echo.references[:5] %}
- [[{{ ref.entry_path }}|{{ ref.entry_date|format_date('%Y-%m-%d') }}]]: "{{ ref.context|truncate(60) }}"
{% endfor %}
{% if echo.reference_count > 5 %}
*...and {{ echo.reference_count - 5 }} more*
{% endif %}
{% endif %}

---

{% endfor %}
{% else %}
*No references found yet. References are dates mentioned with the `~` prefix or `type: reference` in YAML.*
{% endif %}

---

## Reference Patterns

How far back do references reach?

{% if temporal_distance %}
| Distance | Count | Description |
|----------|-------|-------------|
{% for dist in temporal_distance %}
| {{ dist.label }} | {{ dist.count }} | {{ dist.bar }} |
{% endfor %}
{% endif %}

---

## Recent References

{% if recent_references %}
{% for entry in recent_references %}
### {{ entry.date|format_date('%Y-%m-%d') }}

{% for ref in entry.refs %}
- ~{{ ref.date|format_date('%Y-%m-%d') }}{% if ref.context %}: "{{ ref.context }}"{% endif %}

{% endfor %}
{% endfor %}
{% else %}
*No recent references found.*
{% endif %}

---

## All Moments by Date

{% if moments_by_year %}
{% for year, months in moments_by_year.items()|sort(reverse=true) %}
### {{ year }}

| Month | Moments | References |
|-------|---------|------------|
{% for month_data in months %}
| {{ month_data.month_name }} | {{ month_data.moment_count }} | {{ month_data.reference_count }} |
{% endfor %}

{% endfor %}
{% endif %}

---

*Last updated: {{ generated_at|format_date('%Y-%m-%d %H:%M') }}*
